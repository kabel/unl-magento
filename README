== NOTICE ==

Because the files in the app/code/local/AW and app/code/local/Webshopapps are purchased extentions to the magento project, they are NOT distributable. For this reason, anonymous access to the codebase has been blocked.

== INSTALLATION ==

Magento requires a little fine tuning for configuration purposes.
There is a folder of patches (data/patches) that should be applied to the magento root to ensure proper functionality.

    cd /path/to/magento
    patch -p0 < /path/to/unl-magento/data/patches/*.patch

The UNL extensions for magento are handled through a repository of directories and files that need to be symlinked in the magento directory structure.
For reference the two SVN projects are hosted at the following locations:
[magento] : http://svn.magentocommerce.com/source/branches/1.6
[unl-magento] : http://gforge.unl.edu/svn/unl-magento/trunk

A script has been created to facilitate workspace setup.

cd /path/to/magento
/path/to/unl-magento/data/scripts/setupEnv.sh /path/to/unl-magento .

For the "online" install to run, you must
    chmod a+w app/etc
    chmod -R a+w var/
    chmod -R a+w media/
    
Once installation is complete you can remove write permissions from app/etc
    chmod o-w app/etc
    
After "online" installation, follow the instructions below for TAX RATE MAINTENANCE

== CONFIGURATION ==

From the Admin interface, the following configuration settings should be set to ensure proper template layout.
In the navigation go to System > Configuration

General > Design (left tab)
    Package:
        Current Package Name: unl
    HTML Head:
        Default Title: UNL | Marketplace
        Default Keywords: E-commerce
    Footer:
        Copyright: University of Nebraska&ndash;Lincoln

Catalog > Catalog
    Search Engine Optimizations:
        Popular search terms: Disable
        Autogenerated site map: Disable
        Category URL Suffix:
        Page Title Separator: |

Catalog > RSS Feeds
    Rss Config:
        Enable RSS: Enable
    Wishlist:
        Enable RSS: Enable
    Catalog:
        New Products: Enable
        Top Level Category: Enable
    Order:
        Customer Order Status Notification: Enable
        
Customers > Customer Configuration
    Account Sharing Options:
        Share Customer Accounts: Global

Sales > Sales
    Gift Messages:
        Allow Gift Messages for Order Items: Yes

Sales > Tax
    Calculation:
        Apply Tax After Discount: Yes

Sales > Shipping Settings
    Origin:
        Region/State: Nebraska
        ZIP/Postal Code: 68588

Sales > Shipping Methods
    * Configure each carrier per the business requirements (requires API credentials)
    * Disable unused carriers

Sales > Payment Methods
    * Configure each provider per the business requirement (requires API credentials)
    * Disable unused providers
    * PayPal options may also require setting up Sales > PayPal Accounts config

Advanced > Developer
    JavaScript Settings:
        Merge JavaScript Files: Yes


== MAINTENANCE ==

When running maintenance on the magento project that may require temporary shutdown of magento run the following command.
    cd /path/to/magento
    /path/to/unl-magento/data/scripts/swapMaintenance.sh YOUR_IP_ADDRESS
Once the maintenance is over run
   /path/to/unl-magento/data/scripts/swapMaintenance.sh -e


== TAX RATE MAINTENANCE ==

Currently, there is no automated way to update the tax rates for magento. However, the SST Rate and Boundary Data provided by the NE Dept of Rev (http://salestaxrates.ne.gov/nedor/) can be normalized into something magento can use.

1) Download the SST data from the above mentioned site
2) Unzip the file and load the two files into some temporary MySQL database. (The schema for the SST tables is provided in data/tax/SSTSchema.sql)
   The NEB######.txt file loads into the `boundaries` table\
       TRUNCATE TABLE boundaries
       LOAD DATA LOCAL INFILE 'NEB######.txt' INTO TABLE boundaries FIELDS TERMINATED BY ',' LINES TERMINATED BY '\r\n';
   The NER######.txt file loads into the `rates` table
       TRUNCATE TABLE rates
       LOAD DATA LOCAL INFILE 'NER######.txt' INTO TABLE rates FIELDS TERMINATED BY ',' LINES TERMINATED BY '\r\n';
3) Export the resultsets from running the data/tax/tax_procedures.sql file, into CSV. Place all of them in the data/tax/results directory
4) Run the shell script data/tax/build.sh to compile all resultsets into a single CSV file named data/tax/rates.csv
5) [OPTIONAL] Compress the files, so you don't have to send so much to the web server 
   Rename the boundary file: mv NEB#####.txt NEB.txt
   zip the files NEB.txt and rates.csv, individually
6) Go to the Admin Panel on the site at /admin/backoffice/tax_rate/importExport/
7) Upload the boundary file
8) Upload the rates file (using the full import form)


== HELP ==

For help on general design and configuration refer to the documentation provided at http://www.magentocommerce.com/
